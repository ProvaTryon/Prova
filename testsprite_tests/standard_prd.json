{
  "meta": {
    "project": "Pròva - AI-Powered Fashion E-Commerce Platform",
    "date": "2026-02-13",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Pròva is a cutting-edge AI-powered fashion e-commerce platform that enhances online shopping by integrating traditional catalog browsing with advanced 2D and 3D virtual try-on technologies. It offers comprehensive multi-merchant management, personalized recommendations, and bilingual support tailored for the MENA region.",
  "core_goals": [
    "Enable confident online fashion purchases through realistic virtual try-on using AI models.",
    "Provide a seamless multi-merchant marketplace with efficient product and order management tools.",
    "Offer personalized shopping experiences via AI-driven recommendations and AI chatbot assistance.",
    "Support bilingual interface with full RTL layout for English and Arabic users.",
    "Ensure reliable, fast, and secure shopping with robust authentication, cart, and checkout systems."
  ],
  "key_features": [
    "User Authentication supporting multiple roles with secure JWT-based login, signup, and password reset.",
    "Comprehensive Product Browsing with search, filters, sorting, and detailed product pages including reviews and virtual try-on triggers.",
    "2D Virtual Try-On powered by AI model OOTDiffusion, allowing photo upload, garment overlay, and result saving.",
    "Planned 3D Virtual Try-On (VTON360) with 360-degree garment visualization (in active development).",
    "Shopping Cart with item management, real-time price updates, promo codes, and persistent storage.",
    "Multi-step Checkout supporting shipping address input, multiple payment methods including COD, and order review.",
    "Merchant Dashboard for product CRUD operations, order management, inventory tracking, and analytics.",
    "Order History and Tracking with status filtering and shipment tracking for users.",
    "AI-Powered Personalized Recommendations blending collaborative and content-based filtering.",
    "Wishlist management to save and share favorite products easily.",
    "Admin Dashboard featuring user, merchant, product, and order oversight with analytics and moderation tools.",
    "Customer Service Portal for support ticket management and customer interaction tracking.",
    "Bilingual English and Arabic support with instant language switching and RTL UI adherence."
  ],
  "user_flow_summary": [
    "Users register or login via email/password with options for password reset through OTP.",
    "Browse products by category or search with advanced filters and sorting, access detailed product information.",
    "Try virtual try-on by uploading a photo or using sample images; adjust garment overlay and save results.",
    "Add selected items to shopping cart, manage quantities, apply promo codes, and proceed to checkout.",
    "Complete checkout by entering shipping details, selecting payment method, reviewing order, and confirming purchase.",
    "Merchants manage their product listings, upload images via Cloudinary, track sales and orders through their dashboard.",
    "Users view and track orders with status updates, filter by shipment stage, and can cancel unshipped orders.",
    "Administrators oversee platform operations via admin dashboard, including user management and merchant approvals.",
    "Customer service agents handle tickets, respond promptly, and escalate issues through a dedicated portal.",
    "Users switch languages seamlessly between English and Arabic with fully localized and RTL-compliant UI."
  ],
  "validation_criteria": [
    "User authentication workflows perform securely with JWT tokens and password policies enforced.",
    "Virtual try-on processing completes within 15 seconds showing realistic overlays.",
    "Product catalog filters and search respond in under 500ms with accurate results.",
    "Checkout completes successfully under 3 minutes for returning users with order confirmation emails.",
    "Merchant product uploads process images in under 30 seconds and are optimized for 4G delivery.",
    "Recommendations update dynamically with click-through rate above 5%.",
    "Admin and merchant dashboards load within 3 seconds and reflect real-time data.",
    "Support tickets appear in agent queues within 30 seconds and average response time remains under 5 minutes.",
    "Language switch applies instantly with no UI breakage and precise RTL layout rendering.",
    "Known issues such as payment gateway integration and 3D try-on frontend are tracked with mitigation plans."
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "TypeScript",
      "Next.js 15.2.4 (App Router)",
      "React 19",
      "Tailwind CSS",
      "shadcn/ui (Radix UI)",
      "next-intl (i18n)",
      "React Hook Form",
      "Zod validation",
      "Cloudinary"
    ],
    "routes": [
      {
        "path": "/",
        "file": "frontend/app/[locale]/page.tsx",
        "auth_required": false,
        "description": "Homepage with editorial design, featured products, and virtual try-on showcase"
      },
      {
        "path": "/login",
        "file": "frontend/app/[locale]/login/page.tsx",
        "auth_required": false,
        "description": "User login page with email/password authentication"
      },
      {
        "path": "/signup",
        "file": "frontend/app/[locale]/signup/page.tsx",
        "auth_required": false,
        "description": "User registration page with role selection"
      },
      {
        "path": "/forgot-password",
        "file": "frontend/app/[locale]/forgot-password/page.tsx",
        "auth_required": false,
        "description": "Password reset flow with OTP verification"
      },
      {
        "path": "/shop",
        "file": "frontend/app/[locale]/shop/page.tsx",
        "auth_required": false,
        "description": "Product catalog with search, filters, and sorting"
      },
      {
        "path": "/product/:id",
        "file": "frontend/app/[locale]/product/[id]/page.tsx",
        "auth_required": false,
        "description": "Product detail page with images, reviews, and virtual try-on CTA"
      },
      {
        "path": "/cart",
        "file": "frontend/app/[locale]/cart/page.tsx",
        "auth_required": false,
        "description": "Shopping cart with item management and checkout button"
      },
      {
        "path": "/checkout",
        "file": "frontend/app/[locale]/checkout/page.tsx",
        "auth_required": true,
        "description": "Multi-step checkout process (shipping, payment, review)"
      },
      {
        "path": "/profile",
        "file": "frontend/app/[locale]/profile/page.tsx",
        "auth_required": true,
        "description": "User profile management with personal info and body measurements"
      },
      {
        "path": "/orders",
        "file": "frontend/app/[locale]/orders/page.tsx",
        "auth_required": true,
        "description": "Order history with status tracking"
      },
      {
        "path": "/wishlist",
        "file": "frontend/app/[locale]/wishlist/page.tsx",
        "auth_required": true,
        "description": "User's saved favorite products"
      },
      {
        "path": "/virtual-tryon",
        "file": "frontend/app/[locale]/virtual-tryon/page.tsx",
        "auth_required": false,
        "description": "Virtual try-on page with 2D/3D AI models"
      },
      {
        "path": "/recommendations",
        "file": "frontend/app/[locale]/recommendations/page.tsx",
        "auth_required": true,
        "description": "Personalized product recommendations based on user behavior"
      },
      {
        "path": "/reviews",
        "file": "frontend/app/[locale]/reviews/page.tsx",
        "auth_required": true,
        "description": "User's review history"
      },
      {
        "path": "/store-owner",
        "file": "frontend/app/[locale]/store-owner/page.tsx",
        "auth_required": true,
        "description": "Merchant dashboard with sales overview"
      },
      {
        "path": "/store-owner/products",
        "file": "frontend/app/[locale]/store-owner/products/page.tsx",
        "auth_required": true,
        "description": "Product management for merchants (CRUD operations)"
      },
      {
        "path": "/store-owner/orders",
        "file": "frontend/app/[locale]/store-owner/orders/page.tsx",
        "auth_required": true,
        "description": "Order management for merchants"
      },
      {
        "path": "/admin",
        "file": "frontend/app/[locale]/admin/page.tsx",
        "auth_required": true,
        "description": "Admin dashboard with platform analytics"
      },
      {
        "path": "/customer-service",
        "file": "frontend/app/[locale]/customer-service/page.tsx",
        "auth_required": true,
        "description": "Customer service portal for handling support tickets"
      }
    ],
    "features": [
      {
        "name": "User Authentication",
        "description": "Login, signup, and password reset functionality with JWT",
        "files": [
          "frontend/app/[locale]/login/page.tsx",
          "frontend/app/[locale]/signup/page.tsx",
          "frontend/app/[locale]/forgot-password/page.tsx",
          "frontend/lib/auth-service.ts",
          "frontend/lib/auth-context.tsx"
        ],
        "entry_route": "/login",
        "user_interactions": [
          "Navigate to login page",
          "Fill email input field",
          "Fill password input field",
          "Click Login button to submit",
          "See error message on invalid credentials",
          "Click \"Forgot Password\" link",
          "Enter email for password reset",
          "Receive and enter OTP code",
          "Set new password"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "/api/auth/signIn"
          },
          {
            "method": "POST",
            "endpoint": "/api/auth/signUp"
          },
          {
            "method": "POST",
            "endpoint": "/api/auth/forgot-password"
          },
          {
            "method": "POST",
            "endpoint": "/api/auth/reset-password"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Product Browsing",
        "description": "Browse, search, and filter products in the catalog",
        "files": [
          "frontend/app/[locale]/shop/page.tsx",
          "frontend/components/shop/product-grid.tsx",
          "frontend/components/shop/filters.tsx",
          "frontend/lib/product-service.ts"
        ],
        "entry_route": "/shop",
        "user_interactions": [
          "Navigate to shop page",
          "View product grid with images and prices",
          "Use search bar to find products",
          "Apply filters (category, price, brand, size, color)",
          "Sort products (price, newest, popularity)",
          "Click on product card to view details",
          "Add product to wishlist",
          "Add product to cart"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/products"
          },
          {
            "method": "GET",
            "endpoint": "/api/products/search"
          },
          {
            "method": "GET",
            "endpoint": "/api/products/category/:category"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Product Details",
        "description": "View detailed product information with images, reviews, and virtual try-on",
        "files": [
          "frontend/app/[locale]/product/[id]/page.tsx",
          "frontend/components/product/product-gallery.tsx",
          "frontend/components/product/product-reviews.tsx",
          "frontend/lib/product-service.ts"
        ],
        "entry_route": "/product/:id",
        "user_interactions": [
          "Navigate to product detail page",
          "View main product image and gallery",
          "Zoom in on images",
          "Select size and color",
          "Read product description and specifications",
          "View customer reviews and ratings",
          "Click \"Virtual Try-On\" button",
          "Add to cart with selected options",
          "Add to wishlist"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/products/:id"
          },
          {
            "method": "GET",
            "endpoint": "/api/reviews/product/:id"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Shopping Cart",
        "description": "Manage cart items and proceed to checkout",
        "files": [
          "frontend/app/[locale]/cart/page.tsx",
          "frontend/lib/cart-context.tsx"
        ],
        "entry_route": "/cart",
        "user_interactions": [
          "Navigate to cart page",
          "View all cart items with images and prices",
          "Update item quantities",
          "Remove items from cart",
          "See real-time price calculation",
          "Apply promo code",
          "Click \"Proceed to Checkout\" button"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/orders/cart"
          },
          {
            "method": "POST",
            "endpoint": "/api/orders/cart/add"
          },
          {
            "method": "PUT",
            "endpoint": "/api/orders/cart/update"
          },
          {
            "method": "DELETE",
            "endpoint": "/api/orders/cart/remove"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Checkout Process",
        "description": "Complete purchase with shipping and payment information",
        "files": [
          "frontend/app/[locale]/checkout/page.tsx"
        ],
        "entry_route": "/checkout",
        "user_interactions": [
          "Navigate to checkout page",
          "Enter shipping address",
          "Select payment method (COD, Card)",
          "Review order summary",
          "Confirm and place order",
          "Receive order confirmation"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "/api/orders"
          },
          {
            "method": "GET",
            "endpoint": "/api/orders/:id"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Virtual Try-On 2D",
        "description": "Upload photo and try on garments using AI",
        "files": [
          "frontend/app/[locale]/virtual-tryon/page.tsx",
          "frontend/lib/vton-service.ts"
        ],
        "entry_route": "/virtual-tryon",
        "user_interactions": [
          "Navigate to virtual try-on page",
          "Upload user photo or use sample",
          "Select garment from catalog",
          "Choose category (upper body, lower body, dress)",
          "Adjust scale parameter",
          "Click \"Generate Try-On\" button",
          "Wait for AI processing (10-15 seconds)",
          "View result with garment on user photo",
          "Save result to gallery"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "/api/tryon/2d"
          },
          {
            "method": "GET",
            "endpoint": "/api/tryon/history"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Product Management (Merchant)",
        "description": "Merchants can create, edit, and delete products with Cloudinary upload",
        "files": [
          "frontend/app/[locale]/store-owner/products/page.tsx",
          "frontend/components/admin/product-form-modal.tsx",
          "frontend/components/ui/image-upload.tsx",
          "frontend/lib/product-service.ts"
        ],
        "entry_route": "/store-owner/products",
        "user_interactions": [
          "Navigate to merchant products page",
          "Click \"Add Product\" button",
          "Fill product form (name, description, price, category)",
          "Upload main image via drag-and-drop",
          "Upload additional images (up to 5)",
          "Set sizes and colors",
          "Enter stock quantity",
          "Click \"Create Product\" button",
          "See product in merchant's product list",
          "Click edit icon to modify product",
          "Click delete icon to remove product"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/products/merchant/:merchantId"
          },
          {
            "method": "POST",
            "endpoint": "/api/products"
          },
          {
            "method": "PUT",
            "endpoint": "/api/products/:id"
          },
          {
            "method": "DELETE",
            "endpoint": "/api/products/:id"
          },
          {
            "method": "POST",
            "endpoint": "/api/upload (Cloudinary)"
          },
          {
            "method": "POST",
            "endpoint": "/api/delete-image (Cloudinary)"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Order Management (Merchant)",
        "description": "Merchants can view and manage incoming orders",
        "files": [
          "frontend/app/[locale]/store-owner/orders/page.tsx"
        ],
        "entry_route": "/store-owner/orders",
        "user_interactions": [
          "Navigate to merchant orders page",
          "View order list with status filters",
          "Click on order to view details",
          "Update order status (processing, shipped, delivered)",
          "Print packing slip",
          "Add internal notes"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/orders/merchant/:merchantId"
          },
          {
            "method": "PUT",
            "endpoint": "/api/orders/:id/status"
          }
        ],
        "auth_required": true
      },
      {
        "name": "User Profile",
        "description": "Manage personal information and body measurements",
        "files": [
          "frontend/app/[locale]/profile/page.tsx"
        ],
        "entry_route": "/profile",
        "user_interactions": [
          "Navigate to profile page",
          "View current profile information",
          "Edit name, email, phone, address",
          "Add or update body measurements (chest, waist, hips, height, weight)",
          "Save profile changes",
          "View order history section"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/users/profile"
          },
          {
            "method": "PUT",
            "endpoint": "/api/users/profile"
          },
          {
            "method": "PUT",
            "endpoint": "/api/users/body-measurements"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Order Tracking",
        "description": "View order history and track shipments",
        "files": [
          "frontend/app/[locale]/orders/page.tsx",
          "frontend/lib/order-service.ts"
        ],
        "entry_route": "/orders",
        "user_interactions": [
          "Navigate to orders page",
          "View list of all orders with status",
          "Filter orders by status (pending, shipped, delivered)",
          "Click on order to view details",
          "Track shipment with tracking number",
          "Cancel order (if not shipped)"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/orders/user/:userId"
          },
          {
            "method": "GET",
            "endpoint": "/api/orders/:id"
          },
          {
            "method": "PUT",
            "endpoint": "/api/orders/:id/cancel"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Product Recommendations",
        "description": "AI-powered personalized product suggestions",
        "files": [
          "frontend/app/[locale]/recommendations/page.tsx",
          "frontend/lib/recommendation-service.ts"
        ],
        "entry_route": "/recommendations",
        "user_interactions": [
          "Navigate to recommendations page",
          "View personalized product grid",
          "See \"Recommended for You\" section based on browsing history",
          "See \"Complete the Look\" outfit suggestions",
          "Click on recommended product to view details"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/recommendations/user/:userId"
          },
          {
            "method": "GET",
            "endpoint": "/api/recommendations/similar/:productId"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Wishlist Management",
        "description": "Save and manage favorite products",
        "files": [
          "frontend/app/[locale]/wishlist/page.tsx",
          "frontend/lib/wishlist-context.tsx"
        ],
        "entry_route": "/wishlist",
        "user_interactions": [
          "Navigate to wishlist page",
          "View all saved products",
          "Remove product from wishlist",
          "Add product to cart from wishlist",
          "Share wishlist with others"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/wishlist/:userId"
          },
          {
            "method": "POST",
            "endpoint": "/api/wishlist/add"
          },
          {
            "method": "DELETE",
            "endpoint": "/api/wishlist/remove/:productId"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Admin Dashboard",
        "description": "Platform-wide analytics and user management",
        "files": [
          "frontend/app/[locale]/admin/page.tsx"
        ],
        "entry_route": "/admin",
        "user_interactions": [
          "Navigate to admin dashboard",
          "View platform statistics (users, orders, revenue)",
          "See merchant performance rankings",
          "Manage user accounts (suspend, delete)",
          "Approve/reject merchant applications",
          "Moderate product listings"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "/api/admin/stats"
          },
          {
            "method": "GET",
            "endpoint": "/api/admin/users"
          },
          {
            "method": "PUT",
            "endpoint": "/api/admin/users/:id/status"
          },
          {
            "method": "GET",
            "endpoint": "/api/admin/merchants/pending"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Language Switching",
        "description": "Switch between English and Arabic with RTL support",
        "files": [
          "frontend/app/[locale]/layout.tsx",
          "frontend/components/layout/language-switcher.tsx",
          "frontend/i18n/routing.ts",
          "frontend/messages/en.json",
          "frontend/messages/ar.json"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Click language switcher in header",
          "Select English or Arabic",
          "See entire UI switch language instantly",
          "See proper RTL layout for Arabic",
          "See mirrored UI elements (menus, buttons, icons)"
        ],
        "api_calls": [],
        "auth_required": false
      }
    ],
    "known_limitations": [
      {
        "issue": "Product creation/edit validation error - merchant field undefined",
        "location": "frontend/app/[locale]/store-owner/products/page.tsx",
        "impact": "Product creation fails with \"body.merchant validation failed\" error, needs auth context investigation"
      },
      {
        "issue": "Next.js image optimization 500 errors for Cloudinary URLs",
        "location": "next.config.mjs",
        "impact": "Product images fail to load through Next.js image optimizer, may need domain allowlist or sharp config"
      },
      {
        "issue": "Virtual try-on depends on external Google Colab GPU availability",
        "location": "frontend/lib/vton-service.ts",
        "impact": "Try-on may fail or be slow if Colab instance is unavailable or overloaded"
      },
      {
        "issue": "Payment gateway not fully integrated",
        "location": "frontend/app/[locale]/checkout/page.tsx",
        "impact": "Only Cash on Delivery (COD) works, card payment integration pending"
      },
      {
        "issue": "3D virtual try-on (VTON360) not yet implemented in frontend",
        "location": "frontend/app/[locale]/virtual-tryon/page.tsx",
        "impact": "Only 2D try-on (OOTDiffusion) available, 3D feature in development"
      }
    ]
  }
}
